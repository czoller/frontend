<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Your vehicles</title>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
<h1>Your vehicles</h1>
<ul id="vehicles">
</ul>
<form>
<input id="newVehicle" type="text">
<button id="addBtn" type="button">Add Vehicle</button>
</form>
<p id="noVehicles" style="font-style: italic">No vehicles available</p>
<script>
$(document).ready(function () {
  update();
  $('#addBtn').click(add);
});

function update() {
	$.getJSON('vehicles/list', function (data) {
		$('#vehicles').html('');
    data.forEach(v => {
      $('#vehicles').append('<li>' + v + '</li>');
    });
    $('#noVehicles').toggle(data.length == 0);
  });
}

function add() {
	const vehicle = $('#newVehicle').val();
  $.ajax({
    type: 'POST',
    url: 'vehicles/add',
    data: { vehicle: vehicle }
  }).done(function() {
    alert( 'Added new vehicle: ' +  vehicle);
    update();
  }).fail(function() {
    alert( "Error" );
  });
}
</script>
</body>
</html>